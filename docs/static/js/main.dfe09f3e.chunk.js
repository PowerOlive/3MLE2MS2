(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{133:function(e,t,n){e.exports=n.p+"static/media/mushroom.7f63adae.png"},134:function(e,t,n){e.exports=n.p+"static/media/bg2.3fec2c14.jpg"},225:function(e,t,n){e.exports=n(400)},230:function(e,t,n){},239:function(e,t,n){},243:function(e,t,n){},396:function(e,t,n){},398:function(e,t,n){},400:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(21),o=n.n(i),l=(n(230),n(5)),s=n(10),c=n(19),u=n(18),m=n(20),g=n(23),h=n(129),p=n.n(h),d=function(e){var t=e.className,n=e.style;return r.a.createElement("svg",{className:t,style:Object(g.a)({},n),viewBox:"0 0 65 65"},r.a.createElement("g",null,r.a.createElement("path",{d:"m32.5 4.999c-5.405 0-10.444 1.577-14.699 4.282l-5.75-5.75v16.11h16.11l-6.395-6.395c3.18-1.787 6.834-2.82 10.734-2.82 12.171 0 22.073 9.902 22.073 22.074 0 2.899-0.577 5.664-1.599 8.202l4.738 2.762c1.47-3.363 2.288-7.068 2.288-10.964 0-15.164-12.337-27.501-27.5-27.501z"}),r.a.createElement("path",{d:"m43.227 51.746c-3.179 1.786-6.826 2.827-10.726 2.827-12.171 0-22.073-9.902-22.073-22.073 0-2.739 0.524-5.35 1.439-7.771l-4.731-2.851c-1.375 3.271-2.136 6.858-2.136 10.622 0 15.164 12.336 27.5 27.5 27.5 5.406 0 10.434-1.584 14.691-4.289l5.758 5.759v-16.112h-16.111l6.389 6.388z"})))},f=n(80),v=n.n(f),b=n(132),y=n.n(b),E="mml",w="ms2mml",k=function(e){if(e&&e.name)return[E,w].filter(function(t){return t===e.name.split(".").slice(-1)[0].toLowerCase()})[0]};var x=function(e){return".".concat(e.toLowerCase(),",.").concat(e.toUpperCase())},O=(x(E),x(w),x(E)+","+x(w)),j=n(56),N=10,C=function(e){var t=e[0].length;return e.index+t},D=function(e){return e.split("\n").filter(function(e){return!e.trim().startsWith("//")}).map(function(e){return e.replace(/(\/\*.*\*\/|\s)*/g,"").trim()}).join("")},M=function(e){var t,n=[],a=[],r=/\[Channel[0-9]+\]/g;do{(t=r.exec(e))&&n.push(t)}while(t);if(!n||0===n.length)throw Error("Does not contain tracks!");n.push({index:e.lastIndexOf("[3MLE EXTENSION]")});for(var i=0;i<n.length-1;i++)a.push(D(e.slice(C(n[i]),n[i+1].index)));return a};function A(e,t,n){for(var a in e)if(e.hasOwnProperty(a)){if(e[a]===t)return e[a]=n,!0;if("object"===typeof e[a]&&null!==e[a]&&A(e[a],t,n))return!0}return!1}var S=n(39),B=n.n(S),T={attributeNamePrefix:"@_",ignoreAttributes:!1,cdataTagName:"__cdata",cdataPositionChar:"\\c",format:!0,indentBy:"  ",supressEmptyNode:!1};function _(e){return'<?xml version="1.0" encoding="utf-8"?>\n'+function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:T;return new S.j2xParser(t).parse(e)}(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:T)}var G=n(78),F=n.n(G),P={attributeNamePrefix:"@_",ignoreAttributes:!1,ignoreNameSpace:!1,allowBooleanAttributes:!0,parseNodeValue:!0,parseAttributeValue:!0,trimValues:!0,cdataTagName:"__cdata",cdataPositionChar:"\\c",localeRange:"",parseTrueNumberOnly:!1,attrValueProcessor:function(e){return F.a.decode(e,{isAttributeValue:!0})},tagValueProcessor:function(e){return F.a.decode(e)}};var I=n(58),L="iso-8859-1",R="Untitled",z="Big Buck Bunny",U=function e(t,n){var a={};for(var r in t)if(t.hasOwnProperty(r)){if(t[r]===n)return r;if("object"===typeof t[r]&&null!==t[r]){var i=e(t[r],n);i&&(a[r]=i)}}return a}(j,"#text"),W=function(e){return e.split("\n").filter(function(e){return!e.trim().startsWith("//")}).map(function(e){return e.replace(/(\/\*.*\*\/|\s)*/g,"").trim()}).join("")};function V(e,t){var n=[];for(var a in e)if("object"===typeof e[a]&&null!==e[a])n.push.apply(n,Object(I.a)(V(e[a],t[a])));else if("string"===typeof e[a]){t.hasOwnProperty(a)&&t[a].hasOwnProperty(e[a])&&n.push(t[a][e[a]].trim())}return n}n(239);var J=n(8),H=n.n(J),q=function(){function e(){Object(l.a)(this,e)}return Object(s.a)(e,[{key:"run",value:function(e){throw new Error("Not implemented")}}]),e}(),K=8,X=0,$=15,Q=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).value="number"===typeof e&&e>=X&&e<=$?e:K,n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"run",value:function(e){e.volume=this.value/$}},{key:"toString",value:function(){return"v"+this.value}}],[{key:"handleVolumeChange",value:function(e){return"v"!==e[0]&&"v"!==e[1]?e:new t(parseInt(e.slice("&"===e[0]?2:1)))}}]),t}(q),Y=120,Z=32,ee=255,te=96,ne=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).value="number"===typeof e&&e>=Z&&e<=ee?e:Y,n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"run",value:function(e){e.tempo=this.value}},{key:"toString",value:function(){return"t"+this.value}}],[{key:"handleTempoChange",value:function(e){return"t"!==e[0]&&"t"!==e[1]?e:("&"===e[0]&&(e=e.slice(1)),new t(parseInt(e.slice(1))))}}]),t}(q),ae=4,re=1,ie=64,oe=function(e){function t(e){var n,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object(l.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).value="number"===typeof e&&e>=re&&e<=ie?e:ae,n.dotted=!!a,n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"run",value:function(e){e.measureDivision=this}},{key:"toString",value:function(){return"l"+this.value+(this.dotted?".":"")}}],[{key:"handleMDivChange",value:function(e){return"l"!==e[0]&&"l"!==e[1]?e:("&"===e[0]&&(e=e.slice(1)),"."===e[e.length-1]?new t(parseInt(e.slice(1,-1)),!0):new t(parseInt(e.slice(1))))}}]),t}(q),le="UP",se="DOWN",ce=4,ue=0,me=8,ge=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).value=e===le||e===se?e:"number"===typeof e&&e>=ue&&e<=me?e:null,n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"run",value:function(e){this.value===le&&e.octave<me?e.octave++:this.value===se&&e.octave>ue?e.octave--:"number"===typeof this.value&&(e.octave=this.value)}},{key:"toString",value:function(){switch(this.value){case le:return">";case se:return"<";case null:return"";default:return"o"+this.value}}}],[{key:"handleOctaveChange",value:function(e){return"o"!==e[0]&&"<"!==e[0]&&">"!==e[0]&&"o"!==e[1]&&"<"!==e[1]&&">"!==e[1]?e:("&"===e[0]&&(e=e.slice(1)),">"===e[0]?new t(le):"<"===e[0]?new t(se):new t(parseInt(e.slice(1))))}}]),t}(q),he=function(e){function t(e){var n,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object(l.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).value="number"===typeof e&&e>=1&&e<=64?e:null,n.dotted=!!a,n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"run",value:function(e){e.addRest(ye(this,e.measureDivision,e.tempo))}},{key:"toString",value:function(){return(this.value?"r"+this.value:"r")+(this.dotted?".":"")}}],[{key:"handleRestChange",value:function(e){return"r"!==e[0]&&"r"!==e[1]?e:("&"===e[0]&&(e=e.slice(1)),"."===e[e.length-1]?new t(parseInt(e.slice(1,-1)),!0):new t(parseInt(e.slice(1))))}}]),t}(q),pe={0:"C",1:"C#",2:"D",3:"D#",4:"E",5:"F",6:"F#",7:"G",8:"G#",9:"A",10:"A#",11:"B"},de={C:0,"C#":1,D:2,"D#":3,E:4,F:5,"F#":6,G:7,"G#":8,A:9,"A#":10,B:11},fe={"B#":"C",Cb:"B","E#":"F",Fb:"E"},ve=function(e){function t(e,n){var a,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e,n))).note=e,a.value="number"===typeof n&&n>0&&n<=64?n:null,r&&(a.dotted=!!r),i&&(a.tied=!!i),o&&(a.octave=o),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"run",value:function(e){var t=ye(this,e.measureDivision,e.tempo),n=this.note.toString()+(this.octave?this.octave:e.octave);this.tied?e.addTie(n,t):e.playNote(n,t)}},{key:"toString",value:function(){var e,t=this.tied?"&":"";return this.octave?t+"n"+(e=this.note,12*this.octave+de[e]):t+(this.note.toLowerCase()+(this.value?this.value:"")+(this.dotted?".":""))}}],[{key:"handleNoteChange",value:function(e){if(!e)return e;var n=e.toString().match(/^(&)?([a-g][-+#]?)([0-9]*)?(\.)?/);if(!n)return e;var a=n[2].toUpperCase().replace("-","b").replace("+","#");return fe.hasOwnProperty(a)&&(a=fe[a]),new t(a,n[3]?parseInt(n[3]):null,n[4],n[1])}},{key:"handleExactNoteChange",value:function(e){if(!e)return e;var n=e.toString().match(/^(&)?n([0-9]*)/);if(!n)return e;var a=function(e){var t=Math.floor(e/12);return[pe[e%12],t]}(parseInt(n[2]));if(!a)throw new Error("wtf happened with note "+e);return new t(a[0],null,!1,n[1],a[1])}}]),t}(q),be=function(e,t,n){return Math.min(Math.max(e,t),n)};function ye(e,t,n){return 60*function(e,t){return e.value?be(Math.floor(384/e.value),6,384)*(e.dotted?1.5:1):e.dotted?1.5*be(Math.floor(384/t.value),6,384):be(Math.floor(384/t.value),6,384)*(t.dotted?1.5:1)}(e,t)/(n*te)}var Ee=function(e){var t=[oe.handleMDivChange,ne.handleTempoChange,Q.handleVolumeChange,ge.handleOctaveChange,he.handleRestChange,ve.handleExactNoteChange,ve.handleNoteChange],n=e.match(/(&?[a-z][-+#]?[0-9]*\.?|[<>])/g);if(!n)return[];for(var a=0;a<n.length;a++){var r=n[a];for(var i in t)r=t[i](r);n[a]=r}return n},we=function(e){var t=new ke([]);try{for(var n=0;n<e.length;n++)e[n]instanceof q&&e[n].run(t)}catch(a){console.error(a)}return t.playables},ke=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Object(l.a)(this,e),this.time=0,this.octave=ce,this.tempo=Y,this.measureDivision=new oe(ae),this.volume=K/$,this.previousNote=null,this.rest=0,this.playables=Object(I.a)(t)}return Object(s.a)(e,[{key:"playNote",value:function(e,t){this.time+=this.rest,this.rest=0,this.playables.push({note:e,duration:t,time:this.time,velocity:this.volume}),this.time+=t,this.previousNote=e}},{key:"addTie",value:function(e,t){if(!this.previousNote||!this.playables.length)return this.playNote(e,t);this.previousNote===e&&this.playables.slice(-1)[0].note===e?(this.playables[this.playables.length-1].duration+=t,this.time+=t,this.rest=0,this.previousNote=e):this.playNote(e,t)}},{key:"addRest",value:function(e){this.rest+=e,this.previousNote="R"}}]),e}();var xe,Oe,je=n(79),Ne=n.n(je),Ce=n(130),De="piano",Me={A0:"A1.[mp3|ogg]",A1:"A2.[mp3|ogg]",A2:"A3.[mp3|ogg]",A3:"A4.[mp3|ogg]",A4:"A5.[mp3|ogg]",A5:"A6.[mp3|ogg]",A6:"A7.[mp3|ogg]",Ab0:"Ab1.[mp3|ogg]",Ab1:"Ab2.[mp3|ogg]",Ab2:"Ab3.[mp3|ogg]",Ab3:"Ab4.[mp3|ogg]",Ab4:"Ab5.[mp3|ogg]",Ab5:"Ab6.[mp3|ogg]",Ab6:"Ab7.[mp3|ogg]",B0:"B1.[mp3|ogg]",B1:"B2.[mp3|ogg]",B2:"B3.[mp3|ogg]",B3:"B4.[mp3|ogg]",B4:"B5.[mp3|ogg]",B5:"B6.[mp3|ogg]",B6:"B7.[mp3|ogg]",Bb0:"Bb1.[mp3|ogg]",Bb1:"Bb2.[mp3|ogg]",Bb2:"Bb3.[mp3|ogg]",Bb3:"Bb4.[mp3|ogg]",Bb4:"Bb5.[mp3|ogg]",Bb5:"Bb6.[mp3|ogg]",Bb6:"Bb7.[mp3|ogg]",C0:"C1.[mp3|ogg]",C1:"C2.[mp3|ogg]",C2:"C3.[mp3|ogg]",C3:"C4.[mp3|ogg]",C4:"C5.[mp3|ogg]",C5:"C6.[mp3|ogg]",C6:"C7.[mp3|ogg]",C7:"C8.[mp3|ogg]",D0:"D1.[mp3|ogg]",D1:"D2.[mp3|ogg]",D2:"D3.[mp3|ogg]",D3:"D4.[mp3|ogg]",D4:"D5.[mp3|ogg]",D5:"D6.[mp3|ogg]",D6:"D7.[mp3|ogg]",Db0:"Db1.[mp3|ogg]",Db1:"Db2.[mp3|ogg]",Db2:"Db3.[mp3|ogg]",Db3:"Db4.[mp3|ogg]",Db4:"Db5.[mp3|ogg]",Db5:"Db6.[mp3|ogg]",Db6:"Db7.[mp3|ogg]",E0:"E1.[mp3|ogg]",E1:"E2.[mp3|ogg]",E2:"E3.[mp3|ogg]",E3:"E4.[mp3|ogg]",E4:"E5.[mp3|ogg]",E5:"E6.[mp3|ogg]",E6:"E7.[mp3|ogg]",Eb0:"Eb1.[mp3|ogg]",Eb1:"Eb2.[mp3|ogg]",Eb2:"Eb3.[mp3|ogg]",Eb3:"Eb4.[mp3|ogg]",Eb4:"Eb5.[mp3|ogg]",Eb5:"Eb6.[mp3|ogg]",Eb6:"Eb7.[mp3|ogg]",F0:"F1.[mp3|ogg]",F1:"F2.[mp3|ogg]",F2:"F3.[mp3|ogg]",F3:"F4.[mp3|ogg]",F4:"F5.[mp3|ogg]",F5:"F6.[mp3|ogg]",F6:"F7.[mp3|ogg]",G0:"G1.[mp3|ogg]",G1:"G2.[mp3|ogg]",G2:"G3.[mp3|ogg]",G3:"G4.[mp3|ogg]",G4:"G5.[mp3|ogg]",G5:"G6.[mp3|ogg]",G6:"G7.[mp3|ogg]",Gb0:"Gb1.[mp3|ogg]",Gb1:"Gb2.[mp3|ogg]",Gb2:"Gb3.[mp3|ogg]",Gb3:"Gb4.[mp3|ogg]",Gb4:"Gb5.[mp3|ogg]",Gb5:"Gb6.[mp3|ogg]",Gb6:"Gb7.[mp3|ogg]"},Ae={minify:!1,ext:".[mp3|ogg]",baseUrl:"https://raw.githubusercontent.com/mohan-cao/3MLE2MS2-soundfonts/master/",list:["piano","electric-piano","harpsichord","harp","guitar","electric-guitar","acoustic-bass","electric-bass","violin","pizzicato-strings","cello","clarinet","oboe","ocarina","pan-flute","saxophone","trombone","trumpet","harmonica","steel-drums","timpani","tom-tom","vibraphone","xylophone"],setExt:function(e){var t;for(t=0;t<=this.list.length-1;t++)for(var n in this[this.list[t]])this[this.list[t]][n]=this[this.list[t]][n].replace(this.ext,e);return this.ext=e,console.log("sample extensions set to "+this.ext)},load:function(){var e=Object(Ce.a)(Ne.a.mark(function e(t){var n,a,r,i,o,l,s,c,u,m;return Ne.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((n=t||{}).instruments=n.instruments||this.list,n.baseUrl=n.baseUrl||this.baseUrl,n.ext&&(n.ext!==this.ext&&this.setExt(n.ext),n.ext=this.ext),a={},!Array.isArray(n.instruments)){e.next=21;break}i=function(e,t){return t%c!==0},o=function(e){delete s[e]},l=function(e,t,n){return new Promise(function(a,i){try{e[t.instruments[r]]=new H.a.Sampler(n,{baseUrl:t.baseUrl+t.instruments[r]+"/",onload:a})}catch(o){i(o)}})},r=0;case 10:if(!(r<=n.instruments.length-1)){e.next=18;break}return s=this.list.indexOf(-1!==n.instruments[r])?Me:this[n.instruments[r]],!0!==this.minify&&!0!==n.minify||(c=1,Object.keys(s).length>=17&&(c=2),Object.keys(s).length>=33&&(c=4),Object.keys(s).length>=49&&(c=6),Object.keys(s).filter(i).forEach(o)),e.next=15,l(a,n,s);case 15:r++,e.next=10;break;case 18:return e.abrupt("return",a);case 21:return s=this.list.indexOf(-1!==n.instruments[r])?Me:this[n.instruments],!0!==this.minify&&!0!==n.minify||(c=1,Object.keys(s).length>=17&&(c=2),Object.keys(s).length>=33&&(c=4),Object.keys(s).length>=49&&(c=6),Object.keys(s).filter(function(e,t){return t%c!==0}).forEach(function(e){delete s[e]})),m=function(){return new Promise(function(e,t){try{u=new H.a.Sampler(s,{baseUrl:n.baseUrl+n.instruments+"/",onload:e})}catch(a){t(a)}})},e.next=26,m();case 26:return e.abrupt("return",u);case 27:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},Se=function(e){var t=e.className,n=e.style;return r.a.createElement("svg",{className:t,style:Object(g.a)({},n),viewBox:"0 0 36 38",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("g",null,r.a.createElement("rect",{id:"svg_2",height:"36",width:"11.145036",y:"0",x:"0",strokeWidth:"0",stroke:"#0f0f00"}),r.a.createElement("rect",{id:"svg_4",height:"36",width:"11.145036",y:"0",x:"25",strokeWidth:"0",stroke:"#0f0f00"})))},Be=function(e){var t=e.className,n=e.style;return r.a.createElement("svg",{className:t,style:Object(g.a)({},n),viewBox:"0 0 36 38",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("g",null,r.a.createElement("path",{stroke:"#0f0f00",transform:"rotate(90 17.946430206298828,18.103294372558597) ",id:"svg_3",d:"m-0.173562,36.081596l18.119992,-35.956603l18.119992,35.956603l-36.239984,0z",strokeOpacity:"null",strokeWidth:"0"})))},Te=function(e){var t=e.className,n=e.style;return r.a.createElement("svg",{className:t,style:Object(g.a)({},n),viewBox:"0 0 36 38",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("g",null,r.a.createElement("rect",{id:"svg_4",height:"36",width:"35.874996",y:"-0.125",x:"0",fillOpacity:"null",strokeOpacity:"null",strokeWidth:"0",stroke:"#0f0f00"})))},_e=function(e){var t=e.className,n=e.style;return r.a.createElement("svg",{className:t,style:Object(g.a)({},n),viewBox:"1 0 55 80",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("g",{transform:"matrix(1 0 0 -1 0 80)"},r.a.createElement("rect",{width:"10",height:"20",rx:"3"},r.a.createElement("animate",{attributeName:"height",begin:"0s",dur:"4.3s",values:"20;45;57;80;64;32;66;45;64;23;66;13;64;56;34;34;2;23;76;79;20",calcMode:"linear",repeatCount:"indefinite"})),r.a.createElement("rect",{x:"15",width:"10",height:"80",rx:"3"},r.a.createElement("animate",{attributeName:"height",begin:"0s",dur:"2s",values:"80;55;33;5;75;23;73;33;12;14;60;80",calcMode:"linear",repeatCount:"indefinite"})),r.a.createElement("rect",{x:"30",width:"10",height:"50",rx:"3"},r.a.createElement("animate",{attributeName:"height",begin:"0s",dur:"1.4s",values:"50;34;78;23;56;23;34;76;80;54;21;50",calcMode:"linear",repeatCount:"indefinite"})),r.a.createElement("rect",{x:"45",width:"10",height:"30",rx:"3"},r.a.createElement("animate",{attributeName:"height",begin:"0s",dur:"2s",values:"30;45;13;80;56;72;45;76;34;23;67;30",calcMode:"linear",repeatCount:"indefinite"}))))},Ge=(n(243),n(11)),Fe=n(57),Pe=function(e){for(var t=Ee(e),n=0;n<t.length;n++)if(t[n]instanceof ve||t[n]instanceof he||t[n]instanceof oe){if(t[n].value>=64)throw new Error("Note resolution failed at note ".concat(t[n]," in ...(").concat(t.slice(Math.max(n-1,0),Math.min(n+2,t.length-1)).join(""),")...! Reimport your MML track with lower quantization (i.e. 1/32)"));t[n].value*=2}return t.join("")},Ie=function e(){Object(l.a)(this,e),this.measureDivision=oe.DEFAULT_NOTE_DIVISION/2},Le=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).changeInstrument=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:De;H.a.Transport.stop(),H.a.Transport.cancel(),n.setState({instrument:e,tracks:null,playback:!1,loading:!0},function(){Ae.load({instruments:e}).then(function(t){console.log("Loaded "+e);var a=new H.a.Meter;n.setState({synths:t.connect(a).toMaster(),loading:!1}),window.meter=a})})},n.scheduleTrack=function(){var e=n.state,t=e.synths,a=e.tracks;if(n.props.tracks!==a){H.a.Transport.stop(),H.a.Transport.cancel();var r=n.props.tracks?n.props.tracks.map(function(e){return we(Ee(e))}):[],i=r.map(function(e){return e.slice(-1)[0]}).map(function(e){return e&&e.hasOwnProperty("time")?e.time:0}).reduce(function(e,t){return e>t?e:t},0);for(var o in n.setState({tracks:n.props.tracks,duration:i,divisions:i/50}),r.slice(0,10))new H.a.Part(function(e,n){t.triggerAttackRelease(n.note,n.duration,e,n.velocity)},r[o]).start(0);H.a.Transport.scheduleRepeat(function(){var e=H.a.Transport.seconds;n.setState({elapsedTime:e})},1,0),H.a.Transport.schedule(function(){n.setState({playback:!1,elapsedTime:0}),H.a.Transport.stop()},i)}},n.togglePlayback=function(e){if(e.preventDefault(),n.scheduleTrack(),"started"===n.state.playback)return H.a.Transport.pause(),void n.setState({playback:"paused"});H.a.Transport.seconds=n.state.elapsedTime?n.state.elapsedTime:0,H.a.Transport.start(),n.setState({playback:"started"})},n.stopPlayback=function(e){e.preventDefault(),H.a.Transport.stop(),H.a.Transport.cancel(),n.setState({tracks:null,playback:!1,elapsedTime:0,duration:0,divisions:0})},n.seek=function(e){var t=n.state.playback;"started"===t&&(H.a.Transport.pause(),t="paused"),n.setState({playback:t,elapsedTime:e})},n.state={synths:[],tracks:[],duration:0,elapsedTime:0,playback:!1,divisions:0,loading:!0,instrument:De},window.halfNote=Pe,n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.changeInstrument()}},{key:"componentWillUnmount",value:function(){H.a.Transport.stop(),H.a.Transport.cancel(),H.a.Transport.dispose()}},{key:"render",value:function(){var e=this,t=this.props.tracks,n=this.state,a=n.playback,i=n.divisions,o=n.duration,l=n.elapsedTime,s=n.loading,c=n.instrument,u=i&&i<1?1/i:1,m=!t||!t.length||s,g=r.a.createElement("div",{style:{display:"inline-block",marginRight:10}},r.a.createElement(Fe.a,{color:"secondary",style:{width:"4em"},value:l*u,onChange:function(t,n){return e.seek(n/u)},disabled:m,min:0,max:o?o*u:0,step:i?i*u:0}));return r.a.createElement("div",{className:"Synthesiser"},s?r.a.createElement(Ge.a,{style:{marginRight:"1em"},variant:"outlined",color:"primary",disabled:!0},r.a.createElement(_e,{style:{height:"1em",fill:"currentColor",marginRight:"0.3em"},alt:"Loading"}),"Loading"):r.a.createElement("div",{style:{display:"inline-block"}},r.a.createElement(Ge.a,{style:{height:"2em"},variant:"outlined",color:"secondary",onClick:this.togglePlayback,disabled:m},"started"===a?r.a.createElement(Se,{style:{height:"1em",fill:"currentColor"}}):r.a.createElement(Be,{style:{height:"1em",fill:"currentColor"}})),r.a.createElement(Ge.a,{style:{marginRight:"1em",height:"2em"},variant:"outlined",color:"secondary",onClick:this.stopPlayback,disabled:m},r.a.createElement(Te,{style:{height:"1em",fill:"currentColor"}}))),g,r.a.createElement(Ge.b,{disabled:s,color:"grey",style:{display:"inline-block",marginRight:10}},"".concat(Math.floor(l/60),":").concat(("0"+Math.floor(l)%60).slice(-2),"/").concat(Math.floor(o/60),":").concat(("0"+Math.floor(o)%60).slice(-2))),r.a.createElement(Ge.e,{style:{height:"2em"},input:r.a.createElement(Ge.d,{labelWidth:0}),color:"primary",disabled:s,value:c,onChange:function(t){return e.changeInstrument(t.target.value)}},Ae.list.map(function(e){return r.a.createElement(Ge.c,{key:e,value:e},e)})))}}]),t}(a.Component),Re=(xe=function(e,t){var n,a=(n=e.target.result,M(n).slice(0,N));for(var r in a)a[r]=t(a[r]);var i=function(e){for(var t=JSON.parse(JSON.stringify(j)),n=0;n<N;n++)n<e.length?A(t,"#text",e[n]):A(t,"#text",void 0);return{result:t,length:e.map(function(e){return e.length}).reduce(function(e,t){return e+t},0)}}(a),o=i.result;return{length:i.length,result:_(o),mml:a}},Oe=function(e,t,n){var a=function(e){var t=V(U,e);return t&&(t=t.map(function(e){return W(e)})),t}(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:P;return!0===B.a.validate(e)?B.a.parse(e,t):{}}(e.target.result));for(var r in a)a[r]=t(a[r]);return Object(g.a)({},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{encoding:L,title:R,source:z};t.encoding||(t.encoding=L),t.title||(t.title=R),t.source||(t.source=z);for(var n="",a=0;a<e.length;a++)n+="[Channel".concat(a+1,"]\n").concat(e[a],"\n");return{length:e.map(function(e){return e.length}).reduce(function(e,t){return e+t},0),result:"[Settings]\nEncoding=".concat(t.encoding,"\nTitle=").concat(t.title,"\nSource=").concat(t.source,"\nMemo=\n").concat(n)}}(a,{title:n}),{mml:a})},function(e){return e===E?xe:e===w?Oe:void 0}),ze=function(e,t){return 0===t?Pe(e):2===t?function(e){var t=Ee(e),n=new Ie;t.splice(0,0,new oe(4));for(var a=0;a<t.length;a++)t[a]instanceof oe&&(t[a].value/=t[a].value>1?2:1,n.measureDivision=t[a].value/2),t[a].value?t[a]instanceof ve?(t[a].tied=!0,t.splice(a,0,new ve(t[a].note,t[a].value,t[a].dotted,t[a].tied,t[a].octave)),a++):t[a]instanceof he&&(t.splice(a,0,new he(t[a].value,t[a].dotted)),a++):.5===n.measureDivision&&(t[a]instanceof ve?(t[a].tied=!0,t.splice(a,0,new ve(t[a].note,t[a].value,t[a].dotted,t[a].tied,t[a].octave)),a++):t[a]instanceof he&&(t.splice(a,0,new he(t[a].value,t[a].dotted)),a++));return t.join("")}(e):e},Ue=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).uploadFile=function(t){var n=t.target.files[0],a=k(n);if(!a)return e.setState({file:null}),!1;e.setState({changed:!0,file:{name:n.name.split(".")[0],type:a,text:n}})},e.convert=function(t){if(t.preventDefault(),e.state.file){var n=[],a=function(a){try{return ze(a,e.state.scaleTrack)}catch(t){return n.push(t.message),""}},r=new FileReader,i=e.state.file,o=i.name,l=i.type,s=i.text;r.onload=function(t){var r=Re(l)(t,a,o),i=r.result,s=r.length,c=r.mml;e.setState({result:i,length:s,changed:!1,mml:c,errors:n,download:{text:i,name:o+"."+(l===E?w:E)}})},r.readAsText(s)}else window.alert("Please select a valid MS2MML/3MLE file")},e.download=function(t){t.preventDefault(),p()(new File([e.state.download.text],e.state.download.name,{type:"text/plain;charset=utf-8"}))},e.state={file:null,result:"",scaleTrack:1},e}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.changed,a=t.result,i=t.length,o=t.download,l=t.mml,s=t.file,c=t.scaleTrack,u=t.errors,m=s?"Generate "+(s.type===E?"MS2MML":"3MLE MML"):"Please select a file to upload",g=!i||i<=0?"Download...nothing?":i<=3e3?"Download (Novice)":i<=5e3?"Download (Intermediate)":i<=1e4?"Download (Advanced)":"Download (Impossible)";return r.a.createElement("form",{className:"Form-div "+this.props.className},r.a.createElement("div",{className:"Form-leftDiv"},r.a.createElement(Ge.a,{className:"button",variant:"outlined",color:"primary",component:"label"},"Select any MML/MS2MML file",r.a.createElement("input",{name:"file-input",id:"file-input",type:"file",accept:O,onChange:this.uploadFile})),r.a.createElement("div",null,r.a.createElement(Ge.g,{color:"primary"},"\u25bc")),r.a.createElement("div",{className:"buttonDiv"},r.a.createElement(Ge.a,{className:"button",variant:"outlined",color:"primary",onClick:this.convert,disabled:!s},n?r.a.createElement(d,{style:{height:"0.8em",fill:"currentColor",paddingRight:10}}):r.a.createElement("div",null),m)),r.a.createElement("div",{style:{width:"50%",padding:10}},r.a.createElement(Ge.g,{style:{marginBottom:5}},"Note length: ",c>1?"Doubled":c<1?"Halved":"1-to-1"),r.a.createElement(Fe.a,{value:c,onChange:function(t,n){return e.setState({changed:!!a,scaleTrack:n})},min:0,max:2,step:1})),o?r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(Ge.g,{color:"primary"},"\u25bc")),r.a.createElement(Ge.a,{className:"button",variant:"outlined",color:"secondary",onClick:this.download},g),i>1e4?r.a.createElement(Ge.g,{color:"error",variant:"body1"},r.a.createElement(v.a,{style:{fontSize:"1em"}}),"This song is unplayable in-game with "+Math.round(i/1e3)+"K characters"):"",s&&s.type===E?r.a.createElement(Ge.g,{variant:"body1"},r.a.createElement(y.a,{style:{fontSize:"1em"}}),"Maximum 10 tracks allowed"):"",u?u.map(function(e){return r.a.createElement(Ge.g,{color:"error",variant:"body1",key:e},r.a.createElement(v.a,{style:{fontSize:"1em"}}),e)}):""):r.a.createElement("div",null)),r.a.createElement("div",{className:"Form-rightDiv"},r.a.createElement("div",{style:{display:"flex",alignItems:"center"}},r.a.createElement(Ge.g,{variant:"h1",style:{marginRight:20,fontSize:"2em"}},"Preview"),l&&l.length?r.a.createElement(Le,{tracks:l}):r.a.createElement("div",null)),r.a.createElement("textarea",{className:"Form-textResult",value:a,readOnly:!0})))}}]),t}(a.Component),We=n(133),Ve=n.n(We),Je=n(134),He=n.n(Je),qe=(n(396),n(398),n(22)),Ke=n(82),Xe=n.n(Ke),$e=n(137),Qe=n.n($e),Ye=n(135),Ze=n(136),et=Object(qe.createMuiTheme)({palette:{primary:Xe.a,secondary:Qe.a},typography:{useNextVariants:!0},overrides:{MuiFormLabel:{root:{color:Xe.a[400]}}}}),tt=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).state={flip:!1},e}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.state.flip;return r.a.createElement(qe.MuiThemeProvider,{theme:et},r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("img",{src:Ve.a,className:t?"App-logo flip":"App-logo bob",style:{zIndex:2},alt:"logo",onClick:function(){return e.setState({flip:!0})},onAnimationEnd:function(){return e.setState({flip:!1})}}),r.a.createElement("img",{src:He.a,className:"App-bg",alt:"bg"}),r.a.createElement(Ge.g,{color:"primary",variant:"h1",style:{zIndex:3,fontSize:"1em",fontWeight:550,textShadow:"black 0px 0.1em 0.3em"}},"3MLE to MS2MML converter")),r.a.createElement(Ue,{className:"App-form"}),r.a.createElement("div",{className:"SocialButton",style:{position:"fixed",top:0,left:0,zIndex:10}},r.a.createElement(Ge.f,{title:"Find this project on GitHub!",placement:"right"},r.a.createElement("a",{className:"btn github",href:"https://github.com/mohan-cao/3MLE2MS2"},r.a.createElement(Ye.a,{className:"fa",icon:Ze.a}))))))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(tt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},56:function(e){e.exports={ms2:{melody:{__cdata:"#text"},chord:[{"@_index":"1",__cdata:"#text"},{"@_index":"2",__cdata:"#text"},{"@_index":"3",__cdata:"#text"},{"@_index":"4",__cdata:"#text"},{"@_index":"5",__cdata:"#text"},{"@_index":"6",__cdata:"#text"},{"@_index":"7",__cdata:"#text"},{"@_index":"8",__cdata:"#text"},{"@_index":"9",__cdata:"#text"}]}}}},[[225,2,1]]]);
//# sourceMappingURL=main.dfe09f3e.chunk.js.map